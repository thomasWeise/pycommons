<!doctype html><html data-content_root=./ lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0"name=viewport><meta content="width=device-width,initial-scale=1"name=viewport><title>pycommons.ds package — pycommons 0.8.89 documentation</title><link href="/pycommons/_static/pygments.css?v=b86133f3"rel=stylesheet><link href="/pycommons/_static/bizstyle.css?v=5283bb3d"rel=stylesheet><script src="/pycommons/_static/documentation_options.js?v=4db5eb0a"></script><script src="/pycommons/_static/doctools.js?v=fd6eb6e6"></script><script src="/pycommons/_static/sphinx_highlight.js?v=6ffebe34"></script><script src=_static/bizstyle.js></script><link href=https://thomasweise.github.io/pycommons/pycommons.ds.html rel=canonical><link href=genindex.html rel=index title=Index><link href=search.html rel=search title=Search><link title="pycommons.io package"href=pycommons.io.html rel=next><link title="pycommons.dev.tests package"href=pycommons.dev.tests.html rel=prev><meta content="width=device-width,initial-scale=1.0"name=viewport><body><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"accesskey=I href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="pycommons.io package"accesskey=N href=pycommons.io.html>next</a> |<li class=right><a title="pycommons.dev.tests package"accesskey=P href=pycommons.dev.tests.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>pycommons 0.8.89 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>pycommons</a> »<li class="nav-item nav-item-2"><a accesskey=U href=pycommons.html>pycommons package</a> »<li class="nav-item nav-item-this"><a href>pycommons.ds package</a></ul></div><div class=document><div class=documentwrapper><div class=bodywrapper><div class=body role=main><section id=module-pycommons.ds><span id=pycommons-ds-package></span><h1>pycommons.ds package<a title="Link to this heading"class=headerlink href=#module-pycommons.ds>¶</a></h1><p>Some common and shared data structures.<section id=submodules><h2>Submodules<a title="Link to this heading"class=headerlink href=#submodules>¶</a></h2></section><section id=module-pycommons.ds.cache><span id=pycommons-ds-cache-module></span><h2>pycommons.ds.cache module<a title="Link to this heading"class=headerlink href=#module-pycommons.ds.cache>¶</a></h2><p>A factory for functions checking whether argument values are new.<dl class="py class"><dt class="sig sig-object py"id=pycommons.ds.cache.T><span class=property><span class=k><span class=pre>class</span></span><span class=w> </span></span><span class="sig-prename descclassname"><span class=pre>pycommons.ds.cache.</span></span><span class="sig-name descname"><span class=pre>T</span></span><a title="Link to this definition"class=headerlink href=#pycommons.ds.cache.T>¶</a><dd><p>a type variable for the representation-base cache <a class="reference internal"href=#pycommons.ds.cache.repr_cache title=pycommons.ds.cache.repr_cache><code class="xref py py-func docutils literal notranslate"><span class=pre>pycommons.ds.cache.repr_cache()</span></code></a>.</p> <p>alias of TypeVar(‘T’)</p></dl><dl class="py function"><dt class="sig sig-object py"id=pycommons.ds.cache.is_new><span class="sig-prename descclassname"><span class=pre>pycommons.ds.cache.</span></span><span class="sig-name descname"><span class=pre>is_new</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/ds/cache.html#is_new><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.ds.cache.is_new>¶</a><dd><p>Create a function returning <cite>True</cite> when seeing new values.</p> <p>Creates a function which returns <cite>True</cite> only the first time it receives a given argument and <cite>False</cite> all subsequent times. This is based on <a class="reference external"href=https://stackoverflow.com/questions/27427067>https://stackoverflow.com/questions/27427067</a></p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a>], <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a>]</span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>a function <cite>is_new(xx)</cite> that will return <cite>True</cite> the first time it encounters any value <cite>xx</cite> and <cite>False</cite> for all values it has already seen</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>check1</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=nb>str</span><span class=p>],</span> <span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=n>is_new</span><span class=p>()</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check1</span><span class=p>(</span><span class=s2>"a"</span><span class=p>))</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check1</span><span class=p>(</span><span class=s2>"a"</span><span class=p>))</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check1</span><span class=p>(</span><span class=s2>"b"</span><span class=p>))</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check1</span><span class=p>(</span><span class=s2>"b"</span><span class=p>))</span>
<span class=go>False</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>check2</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=nb>int</span><span class=p>],</span> <span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=n>is_new</span><span class=p>()</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check2</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check2</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check2</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check2</span><span class=p>(</span><span class=mi>4</span><span class=p>))</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>check2</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
<span class=go>False</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=pycommons.ds.cache.repr_cache><span class="sig-prename descclassname"><span class=pre>pycommons.ds.cache.</span></span><span class="sig-name descname"><span class=pre>repr_cache</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/ds/cache.html#repr_cache><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.ds.cache.repr_cache>¶</a><dd><p>Create a cache based on the string representation of an object.</p> <p>In this type of cache is that the <cite>repr</cite>-representations of objects are used as keys. The first time an object with a given representation is encountered, it is stored in the cache and returned. The next time an object with the same representation is put into this method, the original object with that representation is returned instead.</p> <p>This can be used to still cache and canonically retrieve objects which by themselves are not hashable, like numpy arrays. While the cache itself is not memory-friendly, it can be used to build data structures that re-use the same objects again and again. If these data structures are heavily used, then this can improve the hardware-cache-friendliness of the corresponding code.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)], <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)]</span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>the cache function</p><dt class=field-odd>Raises<span class=colon>:</span><dd class=field-odd><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#TypeError><strong>TypeError</strong></a> – if the type of a cached object is incompatible with the type of a requested object</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>cache1</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=nb>str</span><span class=p>],</span> <span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>repr_cache</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>a</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=mi>1</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>5</span><span class=si>}</span><span class=s2>"</span>
<span class=gp>>>> </span><span class=n>b</span> <span class=o>=</span> <span class=s2>"5"</span>
<span class=gp>>>> </span><span class=n>a</span> <span class=ow>is</span> <span class=n>b</span>
<span class=go>False</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>cache1</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=go>'5'</span>
<span class=gp>>>> </span><span class=n>cache1</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>cache2</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=nb>float</span><span class=p>],</span> <span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=n>repr_cache</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=o>=</span> <span class=mf>5.78</span>
<span class=gp>>>> </span><span class=n>y</span> <span class=o>=</span> <span class=mi>578</span> <span class=o>/</span> <span class=mi>100</span>
<span class=gp>>>> </span><span class=n>y</span> <span class=ow>is</span> <span class=n>x</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=n>cache2</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>
<span class=go>5.78</span>
<span class=gp>>>> </span><span class=n>cache2</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=ow>is</span> <span class=n>y</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>cache3</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>str</span><span class=p>]],</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=n>repr_cache</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=s1>'1'</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=s1>'3'</span><span class=p>,</span> <span class=mi>7</span><span class=p>:</span> <span class=s1>'7'</span><span class=p>}</span>
<span class=gp>>>> </span><span class=n>b</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=s1>'1'</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=s1>'3'</span><span class=p>,</span> <span class=mi>7</span><span class=p>:</span> <span class=s1>'7'</span><span class=p>}</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>cache3</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>
<span class=go>{1: '1', 3: '3', 7: '7'}</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>cache3</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>cache3</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>cache3</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=ow>is</span> <span class=n>b</span><span class=p>)</span>
<span class=go>False</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>class</span><span class=w> </span><span class=nc>Dummy</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=s2>"22222"</span>
<span class=gp>>>> </span><span class=n>cache4</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=n>Dummy</span><span class=p>],</span> <span class=n>Dummy</span><span class=p>]</span> <span class=o>=</span> <span class=n>repr_cache</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>_</span> <span class=o>=</span> <span class=n>cache4</span><span class=p>(</span><span class=n>Dummy</span><span class=p>())</span>
<span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>cache4</span><span class=p>(</span><span class=mi>22222</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>s</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>s</span><span class=p>[:</span><span class=mi>34</span><span class=p>])</span>
<span class=go>Cache yields element of wrong type</span>
<span class=gp>>>> </span><span class=s2>"Dummy"</span> <span class=ow>in</span> <span class=n>s</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=s2>"int"</span> <span class=ow>in</span> <span class=n>s</span>
<span class=go>True</span>
</pre></div></div></dl></section><section id=module-pycommons.ds.immutable_map><span id=pycommons-ds-immutable-map-module></span><h2>pycommons.ds.immutable_map module<a title="Link to this heading"class=headerlink href=#module-pycommons.ds.immutable_map>¶</a></h2><p>An immutable version of the <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Mapping><code class="xref py py-class docutils literal notranslate"><span class=pre>typing.Mapping</span></code></a> interface.<dl class="py class"><dt class="sig sig-object py"id=pycommons.ds.immutable_map.K><span class=property><span class=k><span class=pre>class</span></span><span class=w> </span></span><span class="sig-prename descclassname"><span class=pre>pycommons.ds.immutable_map.</span></span><span class="sig-name descname"><span class=pre>K</span></span><a title="Link to this definition"class=headerlink href=#pycommons.ds.immutable_map.K>¶</a><dd><p>the type variable for mapping keys</p> <p>alias of TypeVar(‘K’)</p></dl><dl class="py class"><dt class="sig sig-object py"id=pycommons.ds.immutable_map.V><span class=property><span class=k><span class=pre>class</span></span><span class=w> </span></span><span class="sig-prename descclassname"><span class=pre>pycommons.ds.immutable_map.</span></span><span class="sig-name descname"><span class=pre>V</span></span><a title="Link to this definition"class=headerlink href=#pycommons.ds.immutable_map.V>¶</a><dd><p>the type variable for mapping values</p> <p>alias of TypeVar(‘V’)</p></dl><dl class="py function"><dt class="sig sig-object py"id=pycommons.ds.immutable_map.immutable_mapping><span class="sig-prename descclassname"><span class=pre>pycommons.ds.immutable_map.</span></span><span class="sig-name descname"><span class=pre>immutable_mapping</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>a</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/ds/immutable_map.html#immutable_mapping><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.ds.immutable_map.immutable_mapping>¶</a><dd><p>Create an immutable view of a <cite>Mapping</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>a</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Mapping><code class="xref py py-class docutils literal notranslate"><span class=pre>Mapping</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>K</span></code>), <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>V</span></code>)]</span>) – the input <cite>Mapping</cite></p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Mapping><code class="xref py py-class docutils literal notranslate"><span class=pre>Mapping</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>K</span></code>), <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>V</span></code>)]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>an immutable view on the <cite>Mapping</cite> <cite>a</cite> (the view will change if <cite>a</cite> is changed, but you cannot change <cite>a</cite> via the view)</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>x</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>:</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=mi>8</span><span class=p>}</span>
<span class=gp>>>> </span><span class=n>y</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>immutable_mapping</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=ow>is</span> <span class=n>y</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=o>==</span> <span class=n>y</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>y</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>==</span> <span class=n>y</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>==</span> <span class=n>y</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>z</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>immutable_mapping</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=ow>is</span> <span class=n>z</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=o>==</span> <span class=n>z</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>y</span> <span class=ow>is</span> <span class=n>z</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=n>z</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>immutable_mapping</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=ow>is</span> <span class=n>z</span>
<span class=go>False</span>
<span class=gp>>>> </span><span class=n>y</span> <span class=ow>is</span> <span class=n>z</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>x</span> <span class=o>==</span> <span class=n>z</span>
<span class=go>True</span>
<span class=gp>>>> </span><span class=n>x</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>=</span> <span class=mi>23</span>
<span class=gp>>>> </span><span class=n>y</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>==</span> <span class=n>x</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>y</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>2</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>'mappingproxy' object does not support item assignment</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>immutable_mapping</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
<span class=go>a should be an instance of typing.Mapping but is int, namely 5.</span>
</pre></div></div></dl></section><section id=module-pycommons.ds.sequences><span id=pycommons-ds-sequences-module></span><h2>pycommons.ds.sequences module<a title="Link to this heading"class=headerlink href=#module-pycommons.ds.sequences>¶</a></h2><p>Tools for working with sequences.<dl class="py class"><dt class="sig sig-object py"id=pycommons.ds.sequences.T><span class=property><span class=k><span class=pre>class</span></span><span class=w> </span></span><span class="sig-prename descclassname"><span class=pre>pycommons.ds.sequences.</span></span><span class="sig-name descname"><span class=pre>T</span></span><a title="Link to this definition"class=headerlink href=#pycommons.ds.sequences.T>¶</a><dd><p>the type of the element of the sequences to process</p> <p>alias of TypeVar(‘T’)</p></dl><dl class="py function"><dt class="sig sig-object py"id=pycommons.ds.sequences.merge_sorted_and_return_unique><span class="sig-prename descclassname"><span class=pre>pycommons.ds.sequences.</span></span><span class="sig-name descname"><span class=pre>merge_sorted_and_return_unique</span></span><span class=sig-paren>(</span><em class=sig-param><span class=o><span class=pre>*</span></span><span class=n><span class=pre>seqs</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/ds/sequences.html#merge_sorted_and_return_unique><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.ds.sequences.merge_sorted_and_return_unique>¶</a><dd><p>Merge sorted sequences of integers and return only unique values.</p> <p>You can provide multiple sequences, all of which must be sorted. This function then merges them into a single sorted sequence which contains each elemenet at most once. A typical use case would be to combine the result of <a class="reference internal"href=pycommons.math.html#pycommons.math.primes.primes title=pycommons.math.primes.primes><code class="xref py py-func docutils literal notranslate"><span class=pre>pycommons.math.primes.primes()</span></code></a> with some pre-defined values into a sorted sequence.</p> <p>Notice that the elements of the sequence must support the less-than operator, i.e., have a <cite>__lt__</cite> dunder method. Otherwise this function will crash.</p> <p>The returned sequence is guaranteed to provide strictly increasing values.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>seqs</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)]</span>) – the sequences, i.e., some instances of <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> or <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code></p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>), <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>, <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>a merged sequence of integers</p><dt class=field-even>Raises<span class=colon>:</span><dd class=field-even><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#TypeError><strong>TypeError</strong></a> – if any of the provided iterators or any of their elements is <cite>None</cite>, or if any of the elements in <cite>seqs`is not an :class:`Iterable</cite>.</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>list</span><span class=p>(</span><span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>[1, 2, 3]</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>pycommons.math.primes</span><span class=w> </span><span class=kn>import</span> <span class=n>primes</span>
<span class=gp>>>> </span><span class=nb>list</span><span class=p>(</span><span class=n>merge_sorted_and_return_unique</span><span class=p>(</span><span class=n>primes</span><span class=p>(</span><span class=mi>14</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]))</span>
<span class=go>[1, 2, 3, 5, 7, 10, 11, 13]</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>list</span><span class=p>(</span><span class=n>merge_sorted_and_return_unique</span><span class=p>(</span>
<span class=gp>... </span>    <span class=n>primes</span><span class=p>(</span><span class=mi>14</span><span class=p>),</span> <span class=n>primes</span><span class=p>(</span><span class=mi>17</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]))</span>
<span class=go>[1, 2, 3, 5, 7, 10, 11, 13, 17, 100]</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>merge_sorted_and_return_unique</span><span class=p>(</span><span class=mi>1</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>pass</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>'int' object is not iterable</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=mi>3</span><span class=p>],</span> <span class=mi>1</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>'int' object is not iterable</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=kc>None</span><span class=p>],</span> <span class=p>[</span><span class=kc>None</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>Element must not be None.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=kc>None</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>'<' not supported between instances of 'NoneType' and 'int'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>merge_sorted_and_return_unique</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>'NoneType' object is not iterable</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=nb>print</span><span class=p>,</span> <span class=nb>len</span><span class=p>],</span> <span class=p>[</span><span class=nb>repr</span><span class=p>]):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>'<' not supported between instances of 'builtin_function_or_method' and 'builtin_function_or_method'</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=pycommons.ds.sequences.reiterable><span class="sig-prename descclassname"><span class=pre>pycommons.ds.sequences.</span></span><span class="sig-name descname"><span class=pre>reiterable</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>source</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/ds/sequences.html#reiterable><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.ds.sequences.reiterable>¶</a><dd><p>Ensure that an <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> can be iterated over multiple times.</p> <p>This function will solidify an <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code> into an <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code>. In Python, <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code> is a sub-class of <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code>. This means that if your function accepts instances of <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> as input, it may expect to be able to iterate over them multiple times. However, if an <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code> is passed in, which also is an instance of <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> and thus fulfills the function’s type requirement, this is not the case. A typical example of this would be if a <code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code> is passed in. A <code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code> is an instance of <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code>, which, in turn, is an instance of <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code>. However, you can iterate over a <code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code> only once.</p> <p>For such single-use objects, a new <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> wrapper is created. This wrapper will iterate over the original sequence, but cache all elements in an internal <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#list><code class="xref py py-class docutils literal notranslate"><span class=pre>list</span></code></a>. When you iterate over the sequence again, the elements in the <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#list><code class="xref py py-class docutils literal notranslate"><span class=pre>list</span></code></a> will be used. This means that all elements of the original sequence will be stored in memory. However, they are only stored if/when they are actually accessed via the iteration sequence. If you do not iterate over them completely, they are not all stored.</p> <p>This form of re-iterabling is useful if you maybe generate items from a slower sequence or do not plan to use all of them. If you want to use all elements several times anyway, it may be more efficient to just wrap the original source into a <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>. But if, for example, your sequence is the result of iterating over a directory tree on the file system, or maybe if it comes from loading a file, then using <a class="reference internal"href=#pycommons.ds.sequences.reiterable title=pycommons.ds.sequences.reiterable><code class="xref py py-func docutils literal notranslate"><span class=pre>reiterable()</span></code></a> could be useful.</p> <p>This is also true if you actually process the generated sequence in some way that may fail or terminate early. Then, first loading all data into a <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a> may be annoying if your first processed element after that causes a failure or early termination. The bit of overhead of <a class="reference internal"href=#pycommons.ds.sequences.reiterable title=pycommons.ds.sequences.reiterable><code class="xref py py-func docutils literal notranslate"><span class=pre>reiterable()</span></code></a> may then well be worth your while.</p> <p>Of course, this can only work if the <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code> is not otherwise used after calling this function. If you extract elements from the <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code> by yourself otherwise, maybe via <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#next><code class="xref py py-func docutils literal notranslate"><span class=pre>next()</span></code></a>, then <a class="reference internal"href=#pycommons.ds.sequences.reiterable title=pycommons.ds.sequences.reiterable><code class="xref py py-func docutils literal notranslate"><span class=pre>reiterable()</span></code></a> cannot work. However, if you only apply <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#next><code class="xref py py-func docutils literal notranslate"><span class=pre>next()</span></code></a> or other looping paradigms to the <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> returned by <a class="reference internal"href=#pycommons.ds.sequences.reiterable title=pycommons.ds.sequences.reiterable><code class="xref py py-func docutils literal notranslate"><span class=pre>reiterable()</span></code></a>, then you can iterate as often as you want over a <code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code>, for example.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>source</strong> (<span class=sphinx_autodoc_typehints-type><code class="xref py py-data docutils literal notranslate"><span class=pre>Union</span></code>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)], <a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Iterator><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)]]</span>) – the data source</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the resulting re-iterable iterator</p><dt class=field-even>Raises<span class=colon>:</span><dd class=field-even><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#TypeError><strong>TypeError</strong></a> – if <cite>source</cite> is neither an <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code> nor an <code class="xref py py-class docutils literal notranslate"><span class=pre>Iterator</span></code>.</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>ri</span> <span class=o>=</span> <span class=n>reiterable</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>)))</span>
<span class=gp>>>> </span><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>ri</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<span class=go>0</span>
<span class=go>1</span>
<span class=go>2</span>
<span class=go>3</span>
<span class=gp>>>> </span><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>ri</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
<span class=go>0</span>
<span class=go>1</span>
<span class=go>2</span>
<span class=go>3</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>g</span> <span class=o>=</span> <span class=p>(</span><span class=n>i</span> <span class=o>**</span> <span class=mi>2</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=gp>>>> </span><span class=n>r</span> <span class=o>=</span> <span class=n>reiterable</span><span class=p>(</span><span class=n>g</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>tuple</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=go>(0, 1, 4, 9, 16)</span>
<span class=gp>>>> </span><span class=nb>tuple</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=go>(0, 1, 4, 9, 16)</span>
<span class=gp>>>> </span><span class=nb>tuple</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=go>(0, 1, 4, 9, 16)</span>
<span class=gp>>>> </span><span class=nb>tuple</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=go>(0, 1, 4, 9, 16)</span>
<span class=gp>>>> </span><span class=nb>tuple</span><span class=p>(</span><span class=n>g</span><span class=p>)</span>
<span class=go>()</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>g</span> <span class=o>=</span> <span class=p>(</span><span class=n>i</span> <span class=o>**</span> <span class=mi>2</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=gp>>>> </span><span class=n>r</span> <span class=o>=</span> <span class=n>reiterable</span><span class=p>(</span><span class=n>g</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>i1</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>i2</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i1</span><span class=p>)</span>
<span class=go>0</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i2</span><span class=p>)</span>
<span class=go>0</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i2</span><span class=p>)</span>
<span class=go>1</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i1</span><span class=p>)</span>
<span class=go>1</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i1</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i1</span><span class=p>)</span>
<span class=go>9</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i2</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i2</span><span class=p>)</span>
<span class=go>9</span>
<span class=gp>>>> </span><span class=n>i3</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i3</span><span class=p>)</span>
<span class=go>0</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i3</span><span class=p>)</span>
<span class=go>1</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i3</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i3</span><span class=p>)</span>
<span class=go>9</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i3</span><span class=p>)</span>
<span class=go>16</span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i2</span><span class=p>)</span>
<span class=go>16</span>
<span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>next</span><span class=p>(</span><span class=n>i2</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>StopIteration</span> <span class=k>as</span> <span class=n>si</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>si</span><span class=p>))</span>
<span class=go>&LTclass 'StopIteration'></span>
<span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>next</span><span class=p>(</span><span class=n>i3</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>StopIteration</span> <span class=k>as</span> <span class=n>si</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>si</span><span class=p>))</span>
<span class=go>&LTclass 'StopIteration'></span>
<span class=gp>>>> </span><span class=nb>next</span><span class=p>(</span><span class=n>i1</span><span class=p>)</span>
<span class=go>16</span>
<span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>next</span><span class=p>(</span><span class=n>i1</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>StopIteration</span> <span class=k>as</span> <span class=n>si</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>si</span><span class=p>))</span>
<span class=go>&LTclass 'StopIteration'></span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>a</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
<span class=gp>>>> </span><span class=n>reiterable</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>a</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>reiterable</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>}</span>
<span class=gp>>>> </span><span class=n>reiterable</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=mi>3</span><span class=p>}</span>
<span class=gp>>>> </span><span class=n>reiterable</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=ow>is</span> <span class=n>a</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>k</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>reiterable</span><span class=p>(</span><span class=n>k</span><span class=p>)</span> <span class=ow>is</span> <span class=n>k</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>k</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>reiterable</span><span class=p>(</span><span class=n>k</span><span class=p>)</span> <span class=ow>is</span> <span class=n>k</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>tuple</span><span class=p>(</span><span class=n>reiterable</span><span class=p>((</span><span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>))))</span>
<span class=go>(0, 1, 2, 3, 4)</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>reiterable</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>te</span><span class=p>)[:</span><span class=mi>60</span><span class=p>])</span>
<span class=go>source should be an instance of any in {typing.Iterable, typ</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>reiterable</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>te</span><span class=p>)[:</span><span class=mi>60</span><span class=p>])</span>
<span class=go>source should be an instance of any in {typing.Iterable, typ</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>type</span><span class=p>(</span><span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>&LTclass 'generator'></span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>type</span><span class=p>(</span><span class=n>reiterable</span><span class=p>(</span><span class=n>merge_sorted_and_return_unique</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>])))</span>
<span class=go>&LTclass 'pycommons.ds.sequences.__Reiterator'></span>
</pre></div></div></dl></section></section><div class=clearer></div></div></div></div><div aria-label=Main class=sphinxsidebar role=navigation><div class=sphinxsidebarwrapper><div><h3><a href=index.html>Table of Contents</a></h3><ul><li><a class="reference internal"href=#>pycommons.ds package</a><ul><li><a class="reference internal"href=#submodules>Submodules</a><li><a class="reference internal"href=#module-pycommons.ds.cache>pycommons.ds.cache module</a><ul><li><a class="reference internal"href=#pycommons.ds.cache.T><code class="docutils literal notranslate"><span class=pre>T</span></code></a><li><a class="reference internal"href=#pycommons.ds.cache.is_new><code class="docutils literal notranslate"><span class=pre>is_new()</span></code></a><li><a class="reference internal"href=#pycommons.ds.cache.repr_cache><code class="docutils literal notranslate"><span class=pre>repr_cache()</span></code></a></ul><li><a class="reference internal"href=#module-pycommons.ds.immutable_map>pycommons.ds.immutable_map module</a><ul><li><a class="reference internal"href=#pycommons.ds.immutable_map.K><code class="docutils literal notranslate"><span class=pre>K</span></code></a><li><a class="reference internal"href=#pycommons.ds.immutable_map.V><code class="docutils literal notranslate"><span class=pre>V</span></code></a><li><a class="reference internal"href=#pycommons.ds.immutable_map.immutable_mapping><code class="docutils literal notranslate"><span class=pre>immutable_mapping()</span></code></a></ul><li><a class="reference internal"href=#module-pycommons.ds.sequences>pycommons.ds.sequences module</a><ul><li><a class="reference internal"href=#pycommons.ds.sequences.T><code class="docutils literal notranslate"><span class=pre>T</span></code></a><li><a class="reference internal"href=#pycommons.ds.sequences.merge_sorted_and_return_unique><code class="docutils literal notranslate"><span class=pre>merge_sorted_and_return_unique()</span></code></a><li><a class="reference internal"href=#pycommons.ds.sequences.reiterable><code class="docutils literal notranslate"><span class=pre>reiterable()</span></code></a></ul></ul></ul></div><div><h4>Previous topic</h4><p class=topless><a title="previous chapter"href=pycommons.dev.tests.html>pycommons.dev.tests package</a></div><div><h4>Next topic</h4><p class=topless><a title="next chapter"href=pycommons.io.html>pycommons.io package</a></div><div aria-label="source link"role=note><h3>This Page</h3><ul class=this-page-menu><li><a href=_sources/pycommons.ds.rst.txt rel=nofollow>Show Source</a></ul></div><search id=searchbox role=search style=display:none> <h3 id=searchlabel>Quick search</h3> <div class=searchformwrapper><form action=search.html class=search><input aria-labelledby=searchlabel autocapitalize=off autocomplete=off autocorrect=off name=q spellcheck=false><input type=submit value=Go></form></div> </search><script>document.getElementById(`searchbox`).style.display=`block`;</script></div></div><div class=clearer></div></div><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="pycommons.io package"href=pycommons.io.html>next</a> |<li class=right><a title="pycommons.dev.tests package"href=pycommons.dev.tests.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>pycommons 0.8.89 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>pycommons</a> »<li class="nav-item nav-item-2"><a href=pycommons.html>pycommons package</a> »<li class="nav-item nav-item-this"><a href>pycommons.ds package</a></ul></div><div class=footer role=contentinfo>© Copyright 2023-2026, Thomas Weise.</div>
