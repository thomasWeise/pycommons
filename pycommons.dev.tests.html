<!doctype html><html data-content_root=./ lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0"name=viewport><meta content="width=device-width,initial-scale=1"name=viewport><title>pycommons.dev.tests package — pycommons 0.8.89 documentation</title><link href="/pycommons/_static/pygments.css?v=b86133f3"rel=stylesheet><link href="/pycommons/_static/bizstyle.css?v=5283bb3d"rel=stylesheet><script src="/pycommons/_static/documentation_options.js?v=4db5eb0a"></script><script src="/pycommons/_static/doctools.js?v=fd6eb6e6"></script><script src="/pycommons/_static/sphinx_highlight.js?v=6ffebe34"></script><script src=_static/bizstyle.js></script><link href=https://thomasweise.github.io/pycommons/pycommons.dev.tests.html rel=canonical><link href=genindex.html rel=index title=Index><link href=search.html rel=search title=Search><link title="pycommons.ds package"href=pycommons.ds.html rel=next><link title="pycommons.dev.doc package"href=pycommons.dev.doc.html rel=prev><meta content="width=device-width,initial-scale=1.0"name=viewport><body><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"accesskey=I href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="pycommons.ds package"accesskey=N href=pycommons.ds.html>next</a> |<li class=right><a title="pycommons.dev.doc package"accesskey=P href=pycommons.dev.doc.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>pycommons 0.8.89 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>pycommons</a> »<li class="nav-item nav-item-2"><a href=pycommons.html>pycommons package</a> »<li class="nav-item nav-item-3"><a accesskey=U href=pycommons.dev.html>pycommons.dev package</a> »<li class="nav-item nav-item-this"><a href>pycommons.dev.tests package</a></ul></div><div class=document><div class=documentwrapper><div class=bodywrapper><div class=body role=main><section id=module-pycommons.dev.tests><span id=pycommons-dev-tests-package></span><h1>pycommons.dev.tests package<a title="Link to this heading"class=headerlink href=#module-pycommons.dev.tests>¶</a></h1><p>Utilities for testing.<section id=submodules><h2>Submodules<a title="Link to this heading"class=headerlink href=#submodules>¶</a></h2></section><section id=module-pycommons.dev.tests.compile_and_run><span id=pycommons-dev-tests-compile-and-run-module></span><h2>pycommons.dev.tests.compile_and_run module<a title="Link to this heading"class=headerlink href=#module-pycommons.dev.tests.compile_and_run>¶</a></h2><p>Compile and run some Python code for testing purposes.<dl class="py function"><dt class="sig sig-object py"id=pycommons.dev.tests.compile_and_run.compile_and_run><span class="sig-prename descclassname"><span class=pre>pycommons.dev.tests.compile_and_run.</span></span><span class="sig-name descname"><span class=pre>compile_and_run</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>code</span></span></em>, <em class=sig-param><span class=n><span class=pre>source</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/dev/tests/compile_and_run.html#compile_and_run><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.dev.tests.compile_and_run.compile_and_run>¶</a><dd><p>Compile and run some code for testing purposes.</p> <p>This method first checks the types of its parameters. It then performs some superficial sanity checks on <cite>code</cite>. Then, it changes the working directory to a temporary folder which is deleted after all work is done. It then compiles and, if that was successful, executes the code fragment. Then working directory is changed back to the original directory and the temporary directory is deleted.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>code</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the code to be compiled and run<li><p><strong>source</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the source of the code</ul><dt class=field-even>Raises<span class=colon>:</span><dd class=field-even><ul class=simple><li><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#TypeError><strong>TypeError</strong></a> – if <cite>code</cite> or <cite>source</cite> are not strings<li><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#ValueError><strong>ValueError</strong></a> – if any parameter has an invalid value or if the code execution fails</ul><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>=</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=s2>"bla"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'NoneType'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s2>"bla"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'int'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"x=5"</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'NoneType'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"x=5"</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'int'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'NoneType'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"x=5"</span><span class=p>,</span> <span class=s2>""</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Invalid source: ''.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"x=5"</span><span class=p>,</span> <span class=s2>" "</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Source cannot be only white space, but ' ' is.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>""</span><span class=p>,</span> <span class=s2>"x"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Code '' from 'x' is empty?</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>" "</span><span class=p>,</span> <span class=s2>"x"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Code ' ' from 'x' consists of only white space!</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"ä "</span><span class=p>,</span> <span class=s2>"x"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Code 'ä ' from 'x' contains non-ASCII characters.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>contextlib</span><span class=w> </span><span class=kn>import</span> <span class=n>redirect_stdout</span>
<span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>with</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"<>-sdf/%'!234"</span><span class=p>,</span> <span class=s2>"src"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Error when compiling 'src'.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>with</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>        <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"1/0"</span><span class=p>,</span> <span class=s2>"src"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Error when executing 'src'.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>with</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>compile_and_run</span><span class=p>(</span><span class=s2>"print(1)"</span><span class=p>,</span> <span class=s2>"src"</span><span class=p>)</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>wd</span> <span class=o>==</span> <span class=n>getcwd</span><span class=p>()</span>
<span class=go>True</span>
</pre></div></div></dl></section><section id=module-pycommons.dev.tests.examples_in_dir><span id=pycommons-dev-tests-examples-in-dir-module></span><h2>pycommons.dev.tests.examples_in_dir module<a title="Link to this heading"class=headerlink href=#module-pycommons.dev.tests.examples_in_dir>¶</a></h2><p>Test all the example code in a directory.<dl class="py function"><dt class="sig sig-object py"id=pycommons.dev.tests.examples_in_dir.check_examples_in_dir><span class="sig-prename descclassname"><span class=pre>pycommons.dev.tests.examples_in_dir.</span></span><span class="sig-name descname"><span class=pre>check_examples_in_dir</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>directory</span></span></em>, <em class=sig-param><span class=n><span class=pre>recurse</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>True</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/dev/tests/examples_in_dir.html#check_examples_in_dir><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.dev.tests.examples_in_dir.check_examples_in_dir>¶</a><dd><p>Test all the examples in a directory.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>directory</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the directory<li><p><strong>recurse</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>True</span></code>) – should we recurse into sub-directories (if any)?</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the total number of examples executed</p><dt class=field-even>Raises<span class=colon>:</span><dd class=field-even><ul class=simple><li><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#TypeError><strong>TypeError</strong></a> – if <cite>directory</cite> is not a string or <cite>recurse</cite> is not a Boolean<li><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#ValueError><strong>ValueError</strong></a> – if executing the examples fails or if no examples were found</ul></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'NoneType'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'int'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=s2>"x"</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>recurse should be an instance of bool but is None.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=s2>"y"</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>recurse should be an instance of bool but is int, namely 1.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>pycommons.io.temp</span><span class=w> </span><span class=kn>import</span> <span class=n>temp_dir</span>
<span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>contextlib</span><span class=w> </span><span class=kn>import</span> <span class=n>redirect_stdout</span>
<span class=gp>>>> </span><span class=k>with</span> <span class=n>temp_dir</span><span class=p>()</span> <span class=k>as</span> <span class=n>td</span><span class=p>,</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span> <span class=k>as</span> <span class=n>rd</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=n>td</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>s</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>s</span><span class=p>[:</span><span class=mi>30</span><span class=p>])</span>
<span class=go>No examples found in directory</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>with</span> <span class=n>temp_dir</span><span class=p>()</span> <span class=k>as</span> <span class=n>td</span><span class=p>,</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span> <span class=k>as</span> <span class=n>rd</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>pystring</span> <span class=o>=</span> <span class=s2>"print('hello world!')"</span>
<span class=gp>... </span>    <span class=n>td</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"1.py"</span><span class=p>)</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=n>pystring</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>td</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"2.py"</span><span class=p>)</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=n>pystring</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>tdx</span> <span class=o>=</span> <span class=n>td</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"second"</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>tdx</span><span class=o>.</span><span class=n>ensure_dir_exists</span><span class=p>()</span>
<span class=gp>... </span>    <span class=n>tdx</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"1.py"</span><span class=p>)</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=n>pystring</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>tdx</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"2.py"</span><span class=p>)</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=n>pystring</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>r1</span> <span class=o>=</span> <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=n>td</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>r2</span> <span class=o>=</span> <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=n>td</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>r1</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>r2</span><span class=p>)</span>
<span class=go>2</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>with</span> <span class=n>temp_dir</span><span class=p>()</span> <span class=k>as</span> <span class=n>td</span><span class=p>,</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span> <span class=k>as</span> <span class=n>rd</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>pystring</span> <span class=o>=</span> <span class=s2>"print('hello world!')"</span>
<span class=gp>... </span>    <span class=n>td</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"1.py"</span><span class=p>)</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=n>pystring</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>pyerrstring</span> <span class=o>=</span> <span class=s2>"1 / 0"</span>
<span class=gp>... </span>    <span class=n>td</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"2.py"</span><span class=p>)</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=n>pyerrstring</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>tdx</span> <span class=o>=</span> <span class=n>td</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"second"</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>res</span> <span class=o>=</span> <span class=s2>""</span>
<span class=gp>... </span>    <span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>check_examples_in_dir</span><span class=p>(</span><span class=n>td</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>res</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>[:</span><span class=mi>20</span><span class=p>])</span>
<span class=go>Error when executing</span>
</pre></div></div></dl></section><section id=module-pycommons.dev.tests.examples_in_md><span id=pycommons-dev-tests-examples-in-md-module></span><h2>pycommons.dev.tests.examples_in_md module<a title="Link to this heading"class=headerlink href=#module-pycommons.dev.tests.examples_in_md>¶</a></h2><p>Test all the <cite>Python</cite> example code in a markdown file.<dl class="py function"><dt class="sig sig-object py"id=pycommons.dev.tests.examples_in_md.check_examples_in_md><span class="sig-prename descclassname"><span class=pre>pycommons.dev.tests.examples_in_md.</span></span><span class="sig-name descname"><span class=pre>check_examples_in_md</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>file</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/dev/tests/examples_in_md.html#check_examples_in_md><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.dev.tests.examples_in_md.check_examples_in_md>¶</a><dd><p>Test all the example Python codes in a markdown file.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>file</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the file</p><dt class=field-even>Raises<span class=colon>:</span><dd class=field-even><ul class=simple><li><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#TypeError><strong>TypeError</strong></a> – if <cite>file</cite> is not a string<li><p><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/exceptions.html#ValueError><strong>ValueError</strong></a> – if <cite>file</cite> is empty or otherwise invalid</ul><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>contextlib</span><span class=w> </span><span class=kn>import</span> <span class=n>redirect_stdout</span>
<span class=gp>>>> </span><span class=k>with</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=kc>None</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>check_examples_in_md</span><span class=p>(</span><span class=n>file_path</span><span class=p>(</span><span class=n>file_path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>up</span><span class=p>(</span>
<span class=gp>... </span>        <span class=mi>4</span><span class=p>)</span><span class=o>.</span><span class=n>resolve_inside</span><span class=p>(</span><span class=s2>"README.md"</span><span class=p>)))</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_md</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'int'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_md</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>te</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>te</span><span class=p>)</span>
<span class=go>descriptor '__len__' requires a 'str' object but received a 'NoneType'</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_md</span><span class=p>(</span><span class=s2>""</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Path must not be empty.</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>check_examples_in_md</span><span class=p>(</span><span class=s2>"/"</span><span class=p>)</span>
<span class=gp>... </span><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>ve</span><span class=p>)</span>
<span class=go>Path '/' does not identify a file.</span>
</pre></div></div></dl></section><section id=module-pycommons.dev.tests.links_in_md><span id=pycommons-dev-tests-links-in-md-module></span><h2>pycommons.dev.tests.links_in_md module<a title="Link to this heading"class=headerlink href=#module-pycommons.dev.tests.links_in_md>¶</a></h2><p>Test all the links in.<dl class="py function"><dt class="sig sig-object py"id=pycommons.dev.tests.links_in_md.check_links_in_md><span class="sig-prename descclassname"><span class=pre>pycommons.dev.tests.links_in_md.</span></span><span class="sig-name descname"><span class=pre>check_links_in_md</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>file</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/pycommons/dev/tests/links_in_md.html#check_links_in_md><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#pycommons.dev.tests.links_in_md.check_links_in_md>¶</a><dd><p>Test all the links in the given file.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>file</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the file to check</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>pycommons.io.temp</span><span class=w> </span><span class=kn>import</span> <span class=n>temp_file</span>
<span class=gp>>>> </span><span class=k>with</span> <span class=n>temp_file</span><span class=p>()</span> <span class=k>as</span> <span class=n>tf</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>tf</span><span class=o>.</span><span class=n>write_all_str</span><span class=p>(</span><span class=s2>"[test](https://example.com)"</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>check_links_in_md</span><span class=p>(</span><span class=n>tf</span><span class=p>)</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>with</span> <span class=n>temp_file</span><span class=p>()</span> <span class=k>as</span> <span class=n>tf</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>check_links_in_md</span><span class=p>(</span><span class=n>tf</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>ve</span><span class=p>:</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>ve</span><span class=p>)[</span><span class=o>-</span><span class=mi>19</span><span class=p>:])</span>
<span class=go>' contains no text.</span>
</pre></div></div></dl></section></section><div class=clearer></div></div></div></div><div aria-label=Main class=sphinxsidebar role=navigation><div class=sphinxsidebarwrapper><div><h3><a href=index.html>Table of Contents</a></h3><ul><li><a class="reference internal"href=#>pycommons.dev.tests package</a><ul><li><a class="reference internal"href=#submodules>Submodules</a><li><a class="reference internal"href=#module-pycommons.dev.tests.compile_and_run>pycommons.dev.tests.compile_and_run module</a><ul><li><a class="reference internal"href=#pycommons.dev.tests.compile_and_run.compile_and_run><code class="docutils literal notranslate"><span class=pre>compile_and_run()</span></code></a></ul><li><a class="reference internal"href=#module-pycommons.dev.tests.examples_in_dir>pycommons.dev.tests.examples_in_dir module</a><ul><li><a class="reference internal"href=#pycommons.dev.tests.examples_in_dir.check_examples_in_dir><code class="docutils literal notranslate"><span class=pre>check_examples_in_dir()</span></code></a></ul><li><a class="reference internal"href=#module-pycommons.dev.tests.examples_in_md>pycommons.dev.tests.examples_in_md module</a><ul><li><a class="reference internal"href=#pycommons.dev.tests.examples_in_md.check_examples_in_md><code class="docutils literal notranslate"><span class=pre>check_examples_in_md()</span></code></a></ul><li><a class="reference internal"href=#module-pycommons.dev.tests.links_in_md>pycommons.dev.tests.links_in_md module</a><ul><li><a class="reference internal"href=#pycommons.dev.tests.links_in_md.check_links_in_md><code class="docutils literal notranslate"><span class=pre>check_links_in_md()</span></code></a></ul></ul></ul></div><div><h4>Previous topic</h4><p class=topless><a title="previous chapter"href=pycommons.dev.doc.html>pycommons.dev.doc package</a></div><div><h4>Next topic</h4><p class=topless><a title="next chapter"href=pycommons.ds.html>pycommons.ds package</a></div><div aria-label="source link"role=note><h3>This Page</h3><ul class=this-page-menu><li><a href=_sources/pycommons.dev.tests.rst.txt rel=nofollow>Show Source</a></ul></div><search id=searchbox role=search style=display:none> <h3 id=searchlabel>Quick search</h3> <div class=searchformwrapper><form action=search.html class=search><input aria-labelledby=searchlabel autocapitalize=off autocomplete=off autocorrect=off name=q spellcheck=false><input type=submit value=Go></form></div> </search><script>document.getElementById(`searchbox`).style.display=`block`;</script></div></div><div class=clearer></div></div><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="pycommons.ds package"href=pycommons.ds.html>next</a> |<li class=right><a title="pycommons.dev.doc package"href=pycommons.dev.doc.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>pycommons 0.8.89 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>pycommons</a> »<li class="nav-item nav-item-2"><a href=pycommons.html>pycommons package</a> »<li class="nav-item nav-item-3"><a href=pycommons.dev.html>pycommons.dev package</a> »<li class="nav-item nav-item-this"><a href>pycommons.dev.tests package</a></ul></div><div class=footer role=contentinfo>© Copyright 2023-2026, Thomas Weise.</div>
